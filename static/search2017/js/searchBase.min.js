var searchBase={getAjax:function(a){var e={};e.data=undefined;try{var t=$.ajax({type:"get",url:a.Url,data:a.RequestData||{},dataType:a.dataType||"jsonp",jsonpName:a.JsonpName||"",jsonpCallback:a.JsonpName||"",timeout:5e3,beforeSend:function(){if(a.BeforeSend){a.BeforeSend.apply()}},success:function(t){e.data=t;if(a.Param)e.Param=a.Param;if(a.Callback){a.Callback.apply(e)}},error:function(e,t){if(a.errorFn){a.errorFn.apply()}},complete:function(a,e){if(e=="timeout"){t.abort()}}})}catch(a){}},showMask:function(){var a=$('<div id="mask-overlay" class="mask-overlay"></div>').appendTo("body");var e=$("body").height(),t=$(window).height();$h=Math.max(e,t);a.height($h+20)},addMaskContent:function(a,e){$("#mask-overlay").remove();$("#mask-box").remove();var t=$('<div class="mask-box" id="mask-box"><a class="mask-close closeBtn" href="javascript:void(0);">╳</a><div class="mask-content-warp" id="mask-content-warp">'+a+"</div></div>").appendTo("body");var s=t.height(),o=t.width();t.css({"margin-left":-(o/2),"margin-top":-(s/2)});if(e&&typeof e=="function"){e.apply()}$(".closeBtn").bind("click",function(){$("#mask-overlay").remove();t.remove()})},addCollection:function(a,e,t,s,o){$.ajax({type:"get",url:"//ss"+cookieDomain+"/item/v1/sc/"+a+"/"+e+"/"+t+"/homeSite/flag/sc/wishlist",dataType:"jsonp",beforeSend:searchBase.showMask,jsonpCallback:s,success:function(a){var e=a.errorType;var t="";var s=function(){};switch(e){case"isError":t='<div class="mask-icon icon-waring"></div><h3 class="mask-tit">错误！</h3>';break;case"isSuccess":t='<div class="mask-icon"></div><h3 class="mask-tit">成功加入收藏夹！</h3><p id="collecion-content-n">'+o+"</p>";break;case"isCollect":t='<div class="mask-icon icon-waring"></div><h3 class="mask-tit">您已收藏过此商品！</h3><p id="collecion-content-n">'+o+"</p>";a:break;default:break}t=t+'<div class="mask-addCart-btn"><a class="mask-shopping closeBtn" href="javascript:void(0);">继续购物</a><a class="link" href="//myhome'+cookieDomain+'/member/myFavorites" target="_blank">查看收藏夹</a></div>';searchBase.addMaskContent(t,s)}})},addCart:function(a,e,t,s){$.ajax({type:"get",url:a,dataType:"jsonp",jsonpCallback:t,data:e,beforeSend:searchBase.showMask,success:function(a){var e=function(){};if(a.error&&a.error.data){var t=a.error.data,s="";switch(t.code){case"gomeSKU":s="您购物车中的商品种类已达上限"+t.quantityMax+"种";break;case"bookSKU":s="您购物车中的图书种类已达上限"+t.quantityMax+"种";break;case"bbcSKU":s="您购物车中的店铺商品种类已达上限"+t.quantityMax+"种";break;case"gomeQuantity":s="您购物车中的相同商品购买数量不能大于"+t.quantityMax+"件";break;case"bookQuantity":s="您购物车中的相同图书购买数量不能大于"+t.quantityMax+"件";break;case"bbcQuantity":s="您购物车中的相同店铺商品购买数量不能大于"+t.quantityMax+"件";break;case"bbcQuantityForLimitBuy":s=t.message;break;default:s="该商品暂无法购买，请您联系客服解决：4008-708-708";break}s='<div class="mask-icon icon-waring"></div><h3 class="mask-tit">添加失败</h3><div class="mask-text">'+s+"</div>";searchBase.addMaskContent(s,e)}if(a.result&&a.result.cart){var o=a.result.cart.cartSummary,i="";i=o.totalQuantity+""+o.totalAmount;i='<div class="mask-icon"></div><h3 class="mask-tit">添加成功</h3><div class="mask-text">购物车共有<strong>'+o.totalQuantity+"</strong>件商品，商品总价：<strong>¥"+o.totalAmount+"</strong></div>";i+='<div class="mask-addCart-btn"><a href="'+dynSite+'/ec/homeus/cart/cart.jsp" class="mask-gotoCart">去购物车结算&nbsp;&gt;</a><a class="mask-shopping closeBtn">继续购物</a></div>';searchBase.addMaskContent(i,e)}}})},addCartNew:function(a,e,t){window.open(dynSite+contextPath+"/n/success/index.jsp?productId="+a+"&catalogRefId="+e+"&_l="+t)},arrivalNotice:function(a){$.ajax({type:"get",url:a+"notice",dataType:"jsonp",jsonpCallback:"notice",success:function(a){var e=setTimeout(function(){$("#mask-overlay").remove();$("#mask-box").remove()},3e3);searchBase.addMaskContent(a.message,e)}})},exp:{otherCard:/^[0-9.]*$/,normal:/^[a-zA-Z0-9&\u4e00-\u9fa5]+$/,email:/^[a-zA-Z0-9]+([._\\-]*[a-zA-Z0-9]+)@[A-Za-z0-9]+\.[a-z]{2,4}$/,telphone:/^(1)\d{10}$/},replacePrice:function(a,e){var t=$(a).val();if(!searchBase.exp.otherCard.test(e)){$(a).val(e.replace(/[A-Za-z`~!@#$%^&*_+=¥￥（）()<>?:"{},\/;'[\]！。......，…——、‘；—【】|？》《“：\\\-” \u4e00-\u9fa5]/g,""))}},check_email:function(a,e){if(searchBase.exp.email.test(a)&&a!==""){e.html("").hide();return true}else if(a==""){e.html("<i></i>请填写邮箱地址").show();return false}else{e.html("<i></i>请填写正确的邮箱地址").show();return false}},check_phone:function(a,e){if(searchBase.exp.telphone.test(a)&&a!=""){e.html("").hide();return true}else if(a==""){e.html("<i></i>请填写手机号码").show();return false}else{e.html("<i></i>请填写正确的手机号码").show();return false}},replaceNormal:function(a,e){var t=$(a).val();if(!searchBase.exp.otherCard.test(e)){$(a).val(e.replace(/[`~!@#$%^&*_+=¥￥（）()<>?:"{},\/;'[\]！。......，…——、‘；—【】|？》《“：\\\-”]/g,""))}},asyncMaima:function(a,e){var t=a.attr("modelid");var s=a.children();s.each(function(a,s){if(e){$(s).find("a").attr("data-code",t+"-"+(a+1))}else{$(s).attr("data-code",t+"-"+(a+1))}})}};